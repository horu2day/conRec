# 🧪 실시간 참여자 동기화 테스트 가이드 (Phase 7.6)

## 🎯 테스트 목표
**핵심**: 호스트 화면에서 참여자 입장 시 실시간으로 참여자 목록이 업데이트되는지 확인

## 🚀 사전 준비

### 1. 서버 실행
```bash
# 백엔드 서버 실행 (포트 3000)
cd D:\MYCLAUDE_PROJECT\conRec\backend
node simple-server.js

# 프론트엔드 서버 실행 (포트 5173)
cd D:\MYCLAUDE_PROJECT\conRec\frontend
npm run dev
```

### 2. 브라우저 준비
- **2개의 브라우저 창**이 필요 (Chrome, Edge 등 다른 브라우저 또는 시크릿 모드)
- **개발자 도구 (F12) 열기** - 콘솔 로그 확인용

## 📋 테스트 시나리오

### Step 1: 호스트 회의방 생성
1. **브라우저 1**에서 `http://localhost:5173` 접속
2. "새 회의 만들기" 클릭
3. 진행자명 입력 (예: "김호스트") 후 "회의방 생성" 클릭
4. 회의방 화면 진입 확인
5. **콘솔 로그 확인**:
   ```
   🔌 meetingStore.connect() 호출, 현재 연결 상태: true/false
   🧨 기존 이벤트 리스너 정리...
   🎯 participant-joined 이벤트 리스너 등록
   ✅ Socket.io connect 이벤트 발생
   ```

### Step 2: 참여자 입장 (핵심 테스트)
1. **브라우저 2**에서 같은 회의방 링크 접속
   - 방법 A: 호스트 화면에서 "초대 링크 복사" 후 새 브라우저에 붙여넣기
   - 방법 B: `http://localhost:5173/join/[회의방ID]` 직접 접속
2. 참여자명 입력 (예: "박참여자") 후 "회의 참여" 클릭
3. **🎯 핵심 확인 포인트**:
   - 참여자 브라우저: 회의방 화면 정상 진입
   - **호스트 브라우저**: 참여자 목록에 "박참여자" 실시간 추가 확인

### Step 3: 콘솔 로그 확인
**백엔드 콘솔 (Node.js)**에서 확인:
```
✅ 소켓 회의방 참여 성공: [방ID] (참여자: 박참여자)
📊 현재 방 참여자 수: 2명
📢 다른 참여자들에게 입장 알림 전송: 박참여자
```

**호스트 브라우저 콘솔 (F12)**에서 확인:
```
🔔 participant-joined 이벤트 수신: {data: {...}, participant: {...}, room: {...}}
🔄 방 정보 업데이트 시도: {...}
📊 updateRoomInfo 호출: {기존_참여자수: 1, 새로운_참여자수: 2, ...}
🔄 상태 업데이트 완료: {업데이트_후_참여자수: 2}
```

## ✅ 성공 기준

### 즉시 확인 가능한 성공 지표:
1. **UI 업데이트**: 호스트 화면 참여자 목록에 "박참여자" 카드 즉시 표시
2. **참여자 수 표시**: 참여자 섹션 헤더에 "참여자 2" 표시
3. **알림 메시지**: "박참여자님이 입장했습니다" 토스트 알림
4. **콘솔 로그**: 위 Step 3의 모든 로그 정상 출력

### 추가 테스트 (선택사항):
- 참여자 퇴장 시 실시간 제거 (브라우저 창 닫기)
- 3번째, 4번째 참여자 추가 입장
- 녹음 시작/중지 동기화 테스트

## 🐛 문제 발생 시 확인 사항

### 1. 참여자가 호스트 화면에 표시되지 않는 경우:
- 호스트 브라우저 콘솔에서 `🔔 participant-joined 이벤트 수신` 로그 확인
- 로그가 없다면: Socket.io 이벤트 리스너 등록 실패
- 로그는 있지만 UI 업데이트 없다면: updateRoomInfo 함수 문제

### 2. 백엔드 오류 확인:
```bash
# 백엔드 재시작
cd D:\MYCLAUDE_PROJECT\conRec\backend
node simple-server.js
```

### 3. 프론트엔드 오류 확인:
```bash
# 프론트엔드 재시작
cd D:\MYCLAUDE_PROJECT\conRec\frontend
npm run dev
```

## 📞 테스트 결과 보고

### 성공한 경우:
- "✅ Phase 7.6 실시간 참여자 동기화 수정 성공!" 
- 다음 단계: Phase 8 전체 시스템 통합 테스트 진행

### 실패한 경우:
- 구체적인 오류 상황과 콘솔 로그를 함께 보고
- 추가 디버깅 및 수정 작업 필요

---

**⏰ 예상 테스트 시간**: 5-10분  
**🎯 핵심 확인 포인트**: 호스트 화면에 참여자 실시간 표시  
**📊 성공 기준**: 참여자 입장 후 1-2초 내 UI 업데이트  
